<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hand Tracking Demo</title>
<style>
    #videoContainer {
        position: relative;
        width: 640px;
        margin: 0 auto;
    }
    #videoElement {
        width: 100%;
        border: 1px solid black;
    }
    #canvasOverlay {
        position: absolute;
        top: 0;
        left: 0;
    }
</style>
</head>
<body>
<div id="videoContainer">
    <video id="videoElement" autoplay playsinline></video>
    <canvas id="canvasOverlay"></canvas>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tracking.js/1.1.3/tracking-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat.gui/0.7.7/dat.gui.min.js"></script>
<script>
    // Get video element and canvas overlay
    const video = document.getElementById('videoElement');
    const canvas = document.getElementById('canvasOverlay');
    const context = canvas.getContext('2d');

    // Set up dimensions for the canvas
    const width = 640;
    const height = 480;
    canvas.width = width;
    canvas.height = height;

    // Load hand tracking
    const tracker = new tracking.ObjectTracker('hand');
    tracker.setInitialScale(4);
    tracker.setStepSize(2);
    tracker.setEdgesDensity(0.1);

    // Add listener for track event
    tracker.on('track', function(event) {
        context.clearRect(0, 0, canvas.width, canvas.height);

        event.data.forEach(function(rect) {
            context.strokeStyle = '#ff0000';
            context.strokeRect(rect.x, rect.y, rect.width, rect.height);
            context.font = '11px Helvetica';
            context.fillStyle = "#fff";
            context.fillText('x: ' + rect.x + 'px', rect.x + rect.width + 5, rect.y + 11);
            context.fillText('y: ' + rect.y + 'px', rect.x + rect.width + 5, rect.y + 22);
        });
    });

    // Start video stream
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
            video.srcObject = stream;
            video.play();

            // Start tracking
            tracking.track('#videoElement', tracker, { camera: true });
        })
        .catch(function (err) {
            console.log('Error: ' + err);
        });
</script>
</body>
</html>
