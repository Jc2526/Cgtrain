
<!DOCTYPE html>
<html>

<head>
    <title>Motion Detection with Dynamsoft Camera Enhancer</title>
    <script src="https://unpkg.com/dynamsoft-camera-enhancer@2.1.0/dist/dce.js"></script>
</head>

<body>
    <button id="startButton">Start Motion Detection</button>
    <button id="stopButton">Stop Motion Detection</button>
    <audio id="beepSound" src="beep.mp3"></audio>
    <div id="cameraFeed"></div>

    <script>
        let enhancer = null;
        let isMotionDetectionActive = false;
        const beepSound = document.getElementById('beepSound');

        document.getElementById('startButton').addEventListener('click', startMotionDetection);
        document.getElementById('stopButton').addEventListener('click', stopMotionDetection);

        async function startMotionDetection() {
            isMotionDetectionActive = true;
            enhancer = await Dynamsoft.DCE.CameraEnhancer.createInstance();
            document.getElementById("cameraFeed").appendChild(enhancer.getUIElement());
            await enhancer.open(true);
            captureFrames();
        }

        function stopMotionDetection() {
            isMotionDetectionActive = false;
            enhancer && enhancer.close();
        }

        async function captureFrames() {
            while (isMotionDetectionActive) {
                const frame = enhancer.getFrame();
                // Perform motion detection logic here
                if (motionDetected(frame)) {
                    playBeepSound();
                }
                await new Promise(resolve => requestAnimationFrame(resolve));
            }
        }

        function motionDetected(frame) {
            // Implement motion detection logic here
            // For example, compare consecutive frames and check for changes
            // Return true if motion is detected, false otherwise
            return false; // Placeholder, replace with actual logic
        }

        function playBeepSound() {
            beepSound.currentTime = 0;
            beepSound.play();
        }
    </script>
</body>

</html>
